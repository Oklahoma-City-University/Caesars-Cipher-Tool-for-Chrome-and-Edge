<!DOCTYPE html>
<html>
<head>
  <title>Jake's Encryption Tool</title>
  <style>
    /* CSS styles here */
  </style>
</head>
<body>
  <h1>My Encryption Tool</h1>
  <p>Enter your message below and choose an encryption algorithm and a key to encrypt it.</p>
  
  <label for="inputField">Enter your message:</label><br>
  <textarea id="inputField" rows="10"></textarea><br>

  <label for="algorithm">Choose an encryption algorithm:</label>
  <select id="algorithm">
    <option value="caesar">Caesar cipher</option>
    <option value="vigenere">Vigen√®re cipher</option>
    <option value="railfence">Rail Fence cipher</option>
    <option value="hill">Hill cipher</option>
    <option value="rsa">RSA cipher</option>
  </select><br>

  <label for="key">Enter a key:</label>
  <input type="text" id="key" value=""><br>

  <button id="encryptButton">Encrypt</button>
  <button id="decryptButton">Decrypt</button>
  <button id="copyToClipboardButton">Copy to clipboard</button>
  <button id="clearButton">Clear</button>

  <label for="outputField">Encrypted/decrypted message:</label><br>
  <textarea id="outputField" rows="10"></textarea><br>

  <script>


    function encryptCaesar(key) {
      let alphabet = 'abcdefghijklmnopqrstuvwxyz';
      let alphabetCAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

      let user_input = document.getElementById("inputField").value;
      let new_str = "";

      for (let i = 0; i < user_input.length; i++) {
        letter = user_input[i]
        if (alphabet.includes(letter)) {
          new_str += alphabet[((alphabet.indexOf(letter) + Number(key)) % 26)];
        }
        else if (alphabetCAP.includes(letter)) {
          new_str += alphabetCAP[((alphabetCAP.indexOf(letter) + Number(key)) % 26)];
        }
        else {
          new_str += letter;
        }
      }
      document.getElementById("outputField").value = new_str;
    }

    function encryptVigenere(key) {
      let alphabet = 'abcdefghijklmnopqrstuvwxyz';
      let alphabetCAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

      let user_input = document.getElementById("inputField").value;
      let new_str = "";
      let keyword = key.toLowerCase();
      let keywordIndex = 0;

      for (let i = 0; i < user_input.length; i++) {
        let letter = user_input[i];
        let keywordLetter = keyword[keywordIndex % keyword.length];
        let shift = alphabet.indexOf(keywordLetter);
        keywordIndex++;

        if (alphabet.includes(letter)) {
          new_str += alphabet[((alphabet.indexOf(letter) + shift) % 26)];
        }
        else if (alphabetCAP.includes(letter)) {
          new_str += alphabetCAP[((alphabetCAP.indexOf(letter) + shift) % 26)];
        }
        else {
          new_str += letter;
        }
      }
      document.getElementById("outputField").value = new_str;
    }

    function encryptRailFence(key) {
      let user_input = document.getElementById("inputField").value;
      let new_str = "";
      let fence = [];
      for (let i = 0; i < key; i++) {
        fence





.push([]);
      }
      let rail = 0;
      let change = 1;
      for (let i = 0; i < user_input.length; i++) {
        fence[rail].push(user_input[i]);
        rail += change;
        if (rail === key - 1 || rail === 0) {
          change = -change;
        }
      }
      for (let i = 0; i < key; i++) {
        for (let j = 0; j < fence[i].length; j++) {
          new_str += fence[i][j];
        }
      }
      document.getElementById("outputField").value = new_str;
    }

    function encryptHill(key) {
      let user_input = document.getElementById("inputField").value;
      let new_str = "";
      let n = Math.sqrt(key.length);
      let mat = [];
      let tmp = [];
      for (let i = 0; i < key.length; i++) {
        tmp.push(key.charCodeAt(i) - 97);
        if (tmp.length === n) {
          mat.push(tmp);
          tmp = [];
        }
      }
      let user_tmp = [];
      for (let i = 0; i < user_input.length; i++) {
        if (user_input.charCodeAt(i) < 97 || user_input.charCodeAt(i) > 122) {
          continue;
        }
        user_tmp.push(user_input.charCodeAt(i) - 97);
        if (user_tmp.length === n) {
          let res = [];
          for (let j = 0; j < n; j++) {
            let sum = 0;
            for (let k = 0; k < n; k++) {
              sum += mat[j][k] * user_tmp[k];
            }
            res.push(String.fromCharCode((sum % 26) + 97));
          }
          new_str += res.join("");
          user_tmp = [];
        }
      }
      document.getElementById("outputField").value = new_str;
    }

    function encryptRSA(key) {
      let user_input = document.getElementById("inputField").value;
      let new_str = "";
      let p = key[0];
      let q = key[1];
      let n = p * q;
      let tot = (p - 1) * (q - 1);
      let e = 2;
      while (e < tot) {
        if (gcd(e, tot) === 1) {
          break;
        }
        e++;
      }
      let d = modInverse(e, tot);
      for (let i = 0; i < user_input.length; i++) {
        let c = user_input.charCodeAt(i);
        let m = powMod(c, e, n);
        new_str += String.fromCharCode(m);
      }
      document.getElementById("outputField").value = new_str;
    }

function gcd(a, b) {
  if (b === 0) {
    return a;
  }
  return gcd(b, a % b);
}

function modInverse(a, m) {
  for (let i = 1; i < m; i++) {
    if ((a * i) % m === 1) {
      return i;
    }
  }
  return 1;
}

function powMod(b, e, m) {
  let res = 1;
  while (e > 0) {
    if (e % 2 === 1) {
      res = (res * b) % m;
    }
    b = (b * b) % m;
    e = Math.floor(e / 2);
  }
  return res;
}

document.getElementById("encryptButton").addEventListener("click", function() {
  let algorithm = document.getElementById("algorithm").value;
  let key = document.getElementById("key").value;
  if (algorithm === "caesar") {
    encryptCaesar(Number(key));
  }
  else if (algorithm === "vigenere") {
    encryptVigenere(key);
  }
  else if (algorithm === "railfence") {
    encryptRailFence(Number(key));
  }
  else if (algorithm === "hill") {
    encryptHill(key);
  }
  else if (algorithm === "rsa") {
    encryptRSA(JSON.parse(key));
  }
});

document.getElementById("decryptButton").addEventListener("click", function() {
  let algorithm = document.getElementById("algorithm").value;
  let key = document.getElementById("key").value;
  if (algorithm === "caesar") {
    encryptCaesar(26 - Number(key));
  }
  else if (algorithm === "vigenere") {
    encryptVigenere(key);
  }
  else {
    alert("Decryption is not supported for this algorithm.");
  }
});

document.getElementById("copyToClipboardButton").addEventListener("click", copyClipboard);

document.getElementById("clearButton").addEventListener("click", clearFields);
</script>

</body>
</html>

